{
	"format_version": "1.17.0",
	"minecraft:block": {
		"description": {
			"identifier": "medieval:granite_smokestack",
			"properties": {"medieval:state": [0,1]}
		},
		"permutations": [
			{"condition": "query.block_property('medieval:state') == 0","components": {"minecraft:geometry": "geometry.smokestack_top"}},
			{"condition": "query.block_property('medieval:state') == 1","components": {"minecraft:geometry": "geometry.smokestack"}}
		],
		"components": {
			"tag:medieval_furniture": {},
			"minecraft:geometry": "geometry.smokestack_top",
			"minecraft:material_instances": {"*": {"texture": "granite","render_method": "opaque","ambient_occlusion": false}},
			"minecraft:queued_ticking": {"on_tick": {"event": "update"},"interval_range": [7,10],"looping": true},
			"minecraft:creative_category": {"category": "construction","group": "itemGroup.name.smokestack"},
			"tag:smokestack": {},
			"minecraft:entity_collision": {"origin": [-8.0,0.0,-8.0],"size": [16,16,16]},
			"minecraft:pick_collision": {"origin": [-8.0,0.0,-8.0],"size": [16,16,16]},
			"minecraft:block_light_absorption": 0.0,
			"minecraft:explosion_resistance": 6.0,
			"minecraft:destroy_time": 1.0,
			"minecraft:map_color": "#f7781e"
		},
		"events": {
			"update": {
				"sequence": [
					{"condition": "!q.block_neighbor_has_any_tag(0,1,0,'smokestack')","set_block_property": {"medieval:state": 0}},
					{"condition": "q.block_neighbor_has_any_tag(0,1,0,'smokestack')","set_block_property": {"medieval:state": 1}},
					{"condition": "q.block_property('medieval:state') == 0","run_command": {"command": "particle medieval:particle_smoke ~ ~0.7 ~"}}
				]
			}
		}
	}
}