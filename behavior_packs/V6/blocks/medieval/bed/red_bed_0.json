{
	"format_version": "1.20.30",
	"minecraft:block": {
		"description": {
			"identifier": "medieval:bed_0_red",
            "menu_category": {
                "category": "items",
                "group": "itemGroup.name.bed",
                "is_hidden_in_commands": false
            },
			"states": {
				"medieval:facing_direction": [1,2,3,4,5],
				"medieval:side": [0,1,2,3]
			}
		},
		"permutations": [
			{"condition": "q.block_state('medieval:facing_direction') == 2","components": {"minecraft:transformation": {"rotation": [0,0,0]},"tag:bed_0_north": {}}},
			{"condition": "q.block_state('medieval:facing_direction') == 3","components": {"minecraft:transformation": {"rotation": [0,180,0]},"tag:bed_0_south": {}}},
			{"condition": "q.block_state('medieval:facing_direction') == 4","components": {"minecraft:transformation": {"rotation": [0,90,0]},"tag:bed_0_east": {}}},
			{"condition": "q.block_state('medieval:facing_direction') == 5","components": {"minecraft:transformation": {"rotation": [0,-90,0]},"tag:bed_0_west": {}}},
			{"condition": "q.block_state('medieval:side') == 0","components": {"tag:bed_state_0": {}}},
			{"condition": "q.block_state('medieval:side') == 1","components": {"tag:bed_state_1": {}}},
			{"condition": "q.block_state('medieval:side') == 2","components": {"tag:bed_state_2": {}}},
			{"condition": "q.block_state('medieval:side') == 3","components": {"tag:bed_state_3": {}}}
		],
		"components": {
			"tag:medieval_furniture": {},
			"minecraft:geometry": {
				"identifier": "geometry.m.bed_0_top",
				"bone_visibility": {
					"item": "q.block_state('medieval:facing_direction') == 1",
					"bed_left": "q.block_state('medieval:facing_direction') > 1 && (q.block_state('medieval:side') == 0 || q.block_state('medieval:side') == 1)",
					"bed_right": "q.block_state('medieval:facing_direction') > 1 && (q.block_state('medieval:side') == 0 || q.block_state('medieval:side') == 2)",
					"center": "q.block_state('medieval:facing_direction') > 1 && (q.block_state('medieval:side') == 0)",
					"left": "q.block_state('medieval:facing_direction') > 1 && (q.block_state('medieval:side') == 1)",
					"right": "q.block_state('medieval:facing_direction') > 1 && (q.block_state('medieval:side') == 2)",
					"middle": "q.block_state('medieval:facing_direction') > 1 && (q.block_state('medieval:side') == 3)"
				}
			},
			"tag:bed_0_top": {},
			"tag:red_bed_0": {},
			"minecraft:material_instances": {"bed": {"texture": "red_bed","render_method": "alpha_test"},"planks": {"texture": "oak_planks","render_method": "alpha_test"},"*": {"texture": "stripped_oak","render_method": "alpha_test"}},
			"minecraft:on_player_placing": {"event": "set_facing_direction"},
			"minecraft:on_interact": {"event": "sleep"},
			"minecraft:on_placed": {"event": "place_block","target": "self"},
			"minecraft:queued_ticking": {"on_tick":{"event": "update"},"interval_range": [2,2],"looping": true},
			"minecraft:collision_box": {"origin": [-8.0,0.0,-8.0],"size": [16,8,16]},
			"minecraft:selection_box": {"origin": [-8.0,0.0,-8.0],"size": [16,8,16]},
			"minecraft:light_dampening": 0,
			"minecraft:destructible_by_explosion": {"explosion_resistance": 3.0},
			"minecraft:destructible_by_mining": {"seconds_to_destroy": 0.8},
			"minecraft:map_color": "#ED8116"
		},
		"events": {
			"set_facing_direction": {"set_block_state": {"medieval:facing_direction": "q.cardinal_facing_2d"}},
			"place_block": {"sequence": [
				{"condition": "q.block_state('medieval:facing_direction') == 2","run_command": {"command": ["setblock ~ ~ ~1 medieval:bed_0_controller keep"]}},
				{"condition": "q.block_state('medieval:facing_direction') == 3","run_command": {"command": ["setblock ~ ~ ~-1 medieval:bed_0_controller keep"]}},
				{"condition": "q.block_state('medieval:facing_direction') == 4","run_command": {"command": ["setblock ~1 ~ ~ medieval:bed_0_controller keep"]}},
				{"condition": "q.block_state('medieval:facing_direction') == 5","run_command": {"command": ["setblock ~-1 ~ ~ medieval:bed_0_controller keep"]}}]},
			"update": {"sequence": [
				{"condition": "(q.block_state('medieval:facing_direction') == 2 && (!q.block_neighbor_has_any_tag(1,0,0,'bed_0_north') && !q.block_neighbor_has_any_tag(-1,0,0,'bed_0_north'))) || (q.block_state('medieval:facing_direction') == 3 && (!q.block_neighbor_has_any_tag(1,0,0,'tag:bed_0_south') && !q.block_neighbor_has_any_tag(-1,0,0,'bed_0_south'))) || (q.block_state('medieval:facing_direction') == 4 && (!q.block_neighbor_has_any_tag(0,0,-1,'bed_0_east') && !q.block_neighbor_has_any_tag(0,0,1,'bed_0_east'))) || (q.block_state('medieval:facing_direction') == 5 && (!q.block_neighbor_has_any_tag(0,0,-1,'bed_0_west') && !q.block_neighbor_has_any_tag(0,0,1,'bed_0_west')))","set_block_state": {"medieval:side": 0}},
				{"condition": "(q.block_state('medieval:facing_direction') == 2 && (q.block_neighbor_has_any_tag(1,0,0,'bed_0_north') && !q.block_neighbor_has_any_tag(-1,0,0,'bed_0_north'))) || (q.block_state('medieval:facing_direction') == 3 && (q.block_neighbor_has_any_tag(-1,0,0,'bed_0_south') && !q.block_neighbor_has_any_tag(1,0,0,'bed_0_south'))) || (q.block_state('medieval:facing_direction') == 4 && (q.block_neighbor_has_any_tag(0,0,-1,'bed_0_east') && !q.block_neighbor_has_any_tag(0,0,1,'bed_0_east'))) || (q.block_state('medieval:facing_direction') == 5 && (q.block_neighbor_has_any_tag(0,0,1,'bed_0_west') && !q.block_neighbor_has_any_tag(0,0,-1,'bed_0_west')))","set_block_state": {"medieval:side": 1}},
				{"condition": "(q.block_state('medieval:facing_direction') == 2 && (!q.block_neighbor_has_any_tag(1,0,0,'bed_0_north') && q.block_neighbor_has_any_tag(-1,0,0,'bed_0_north'))) || (q.block_state('medieval:facing_direction') == 3 && (!q.block_neighbor_has_any_tag(-1,0,0,'bed_0_south') && q.block_neighbor_has_any_tag(1,0,0,'bed_0_south'))) || (q.block_state('medieval:facing_direction') == 4 && (!q.block_neighbor_has_any_tag(0,0,-1,'bed_0_east') && q.block_neighbor_has_any_tag(0,0,1,'bed_0_east'))) || (q.block_state('medieval:facing_direction') == 5 && (!q.block_neighbor_has_any_tag(0,0,1,'bed_0_west') && q.block_neighbor_has_any_tag(0,0,-1,'bed_0_west')))","set_block_state": {"medieval:side": 2}},
				{"condition": "(q.block_state('medieval:facing_direction') == 2 && (q.block_neighbor_has_any_tag(1,0,0,'bed_0_north') && q.block_neighbor_has_any_tag(-1,0,0,'bed_0_north'))) || (q.block_state('medieval:facing_direction') == 3 && (q.block_neighbor_has_any_tag(1,0,0,'bed_0_south') && q.block_neighbor_has_any_tag(-1,0,0,'bed_0_south'))) || (q.block_state('medieval:facing_direction') == 4 && (q.block_neighbor_has_any_tag(0,0,-1,'bed_0_east') && q.block_neighbor_has_any_tag(0,0,1,'bed_0_east'))) || (q.block_state('medieval:facing_direction') == 5 && (q.block_neighbor_has_any_tag(0,0,-1,'bed_0_west') && q.block_neighbor_has_any_tag(0,0,1,'bed_0_west')))","set_block_state": {"medieval:side": 3}},
				{"condition": "(q.block_state('medieval:facing_direction') == 2 && !q.block_neighbor_has_any_tag(0,0,1,'bed0_north')) || (q.block_state('medieval:facing_direction') == 3 && !q.block_neighbor_has_any_tag(0,0,-1,'bed0_south')) || (q.block_state('medieval:facing_direction') == 4 && !q.block_neighbor_has_any_tag(1,0,0,'bed0_east')) || (q.block_state('medieval:facing_direction') == 5 && !q.block_neighbor_has_any_tag(-1,0,0,'bed0_west'))","die": {"target": "self"}}]},
			"sleep": {"sequence": [
				{"condition": "q.block_state('medieval:facing_direction') == 2","run_command": {"command": ["execute unless entity @e[type=medieval:sleep,r=0.5] run summon medieval:sleep ~ ~-0.1 ~ facing ~ ~ ~1"]}},
				{"condition": "q.block_state('medieval:facing_direction') == 3","run_command": {"command": ["execute unless entity @e[type=medieval:sleep,r=0.5] run summon medieval:sleep ~ ~-0.1 ~ facing ~ ~ ~-1"]}},
				{"condition": "q.block_state('medieval:facing_direction') == 4","run_command": {"command": ["execute unless entity @e[type=medieval:sleep,r=0.5] run summon medieval:sleep ~ ~-0.1 ~ facing ~1 ~ ~"]}},
				{"condition": "q.block_state('medieval:facing_direction') == 5","run_command": {"command": ["execute unless entity @e[type=medieval:sleep,r=0.5] run summon medieval:sleep ~ ~-0.1 ~ facing ~-1 ~ ~"]}},
				{"run_command": {"command":["execute as @e[type=medieval:sleep,c=1,r=0.5] run ride @p[r=5,tag=!is_sleep] start_riding @s teleport_rider"]}}
			]}
		}
	}
}